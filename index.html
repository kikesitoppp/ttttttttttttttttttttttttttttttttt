<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Te Amo con Corazones</title>
<style>
  body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: pink;
  }
  canvas {
    display: block;
  }
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Coordenadas de los conejos
const conejoIzq = {x: 50, y: canvas.height - 80};
const conejoDer = {x: canvas.width - 50, y: canvas.height - 80};

// Generar puntos para el coraz√≥n grande
function generarPuntosCorazon(cx, cy, size, step=0.15){
    const puntos = [];
    for(let t = 0; t < Math.PI*2; t += step){
        let x = 16 * Math.pow(Math.sin(t), 3);
        let y = -(13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t));
        puntos.push({x: cx + x*size, y: cy + y*size});
    }
    return puntos;
}

// Generar puntos para el texto TE AMO
function generarPuntosTexto(text, xOffset, yOffset, size=15){
    const tempCanvas = document.createElement("canvas");
    tempCanvas.width = canvas.width;
    tempCanvas.height = canvas.height;
    const tempCtx = tempCanvas.getContext("2d");
    tempCtx.font = `${size*5}px Arial Black`;
    tempCtx.fillText(text, xOffset, yOffset);
    const imageData = tempCtx.getImageData(0,0,tempCanvas.width,tempCanvas.height).data;
    const puntos = [];
    for(let y=0;y<tempCanvas.height;y+=8){
        for(let x=0;x<tempCanvas.width;x+=8){
            let idx = (y*tempCanvas.width + x)*4;
            if(imageData[idx+3]>128){
                puntos.push({x,y});
            }
        }
    }
    return puntos;
}

// Posiciones destino para formar figura
const puntosCorazon = generarPuntosCorazon(canvas.width/2, canvas.height/2 + 50, 15);
const puntosTexto = generarPuntosTexto("TE AMO", canvas.width/2 - 200, canvas.height/4, 12);
let puntosDestino = [...puntosTexto, ...puntosCorazon];

// Corazones activos
const corazones = [];

// Funci√≥n para disparar corazones
function dispararCorazon(origen){
    let destino = null;
    if(puntosDestino.length>0){
        // Si todav√≠a quedan puntos por llenar
        destino = puntosDestino.splice(Math.floor(Math.random()*puntosDestino.length),1)[0];
    } else {
        // Si ya se form√≥ todo, destino aleatorio para que siga flotando
        destino = {x: Math.random()*canvas.width, y: Math.random()*canvas.height/2};
    }
    corazones.push({
        x: origen.x,
        y: origen.y,
        destino,
        size: 8,
        velocidad: 0.02 + Math.random()*0.03,
        flotando: puntosDestino.length === 0
    });
}

// Dibujar un coraz√≥n peque√±o
function dibujarCorazon(x, y, size=10){
    ctx.fillStyle = "red";
    ctx.font = `${size}px Arial`;
    ctx.fillText("‚ù§", x, y);
}

// Animaci√≥n
function animar(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Dibujar corazones
    corazones.forEach(c=>{
        if(c.flotando){
            // Se mueven suavemente hacia arriba y un poco aleatorio
            c.y -= 1 + Math.random()*1;
            c.x += (Math.random()-0.5)*1;
            if(c.y < -20) c.y = canvas.height; // reaparecen abajo
        } else {
            // Mover hacia su destino
            c.x += (c.destino.x - c.x)*c.velocidad;
            c.y += (c.destino.y - c.y)*c.velocidad;
        }
        dibujarCorazon(c.x, c.y, c.size);
    });

    // Dibujar conejos
    ctx.font = "60px Arial";
    ctx.fillText("üêá", conejoIzq.x-30, conejoIzq.y);
    ctx.fillText("üêá", conejoDer.x-30, conejoDer.y);

    requestAnimationFrame(animar);
}

// Rafaga continua de corazones
setInterval(()=>dispararCorazon(conejoIzq), 50);
setInterval(()=>dispararCorazon(conejoDer), 50);

animar();
</script>
</body>
</html>
